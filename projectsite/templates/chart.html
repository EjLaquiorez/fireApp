{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="page-inner">
  <h4 class="page-title">Chart.js</h4>
  <div class="page-category">Simple yet flexible JavaScript charting for designers & developers. Please checkout their <a href="https://www.chartjs.org/" target="_blank">full documentation</a>.</div>
  <div class="row">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Line Chart</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas id="lineChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Bar Chart</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas id="barChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Pie Chart</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas id="pieChart" style="width: 50%; height: 50%"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Doughnut Chart</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas id="doughnutChart" style="width: 50%; height: 50%"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Radar Chart</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas id="radarChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Bubble Chart</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas id="bubbleChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Multiple Line Chart</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas id="multipleLineChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Multiple Bar Chart</div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas id="multipleBarChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <div class="card-title">Chart with HTML Legends</div>
        </div>
        <div class="card-body">
          <div class="card-sub">Sometimes you need a very complex legend. In these cases, it makes sense to generate an HTML legend. Charts provide a generateLegend() method on their prototype that returns an HTML string for the legend.</div>
          <div class="chart-container">
            <canvas id="htmlLegendsChart"></canvas>
          </div>
          <div id="myChartLegend"></div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block chart %}
<script>
    function loadChartData() {
      // pieChart
      fetch("/chart/")
        .then((response) => response.json())
        .then((data) => {
          var severityLevels = Object.keys(data);
          var counts = Object.values(data);
          var pieChart = document.getElementById("pieChart").getContext("2d");
  
          console.log("call");
  
          new Chart(pieChart, {
            type: "pie",
            data: {
              datasets: [
                {
                  data: counts,
                  backgroundColor: ["#1d7af3", "#f3545d", "#fdaf4b"],
                  borderWidth: 0,
                },
              ],
              labels: severityLevels,
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              legend: {
                position: "bottom",
                labels: {
                  fontColor: "rgb(154, 154, 154)",
                  fontSize: 11,
                  usePointStyle: true,
                  padding: 20,
                },
              },
              pieceLabel: {
                render: "percentage",
                fontColor: "white",
                fontSize: 14,
              },
              tooltips: false,
              layout: {
                padding: {
                  left: 20,
                  right: 20,
                  top: 20,
                  bottom: 20,
                },
              },
            },
          });
        })
        .catch((error) => console.error("Error:", error));

        fetch("/lineChart/")
    .then((response) => response.json())
    .then((result_with_month_names) => {
      var months = Object.keys(result_with_month_names);
      var counts = Object.values(result_with_month_names);
      var lineChart = document.getElementById("lineChart").getContext("2d");

      new Chart(lineChart, {
        type: "line",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
          datasets: [
            {
              label: "Active Users",
              borderColor: "#1d7af3",
              pointBorderColor: "#FFF",
              pointBackgroundColor: "#1d7af3",
              pointBorderWidth: 2,
              pointHoverRadius: 4,
              pointHoverBorderWidth: 1,
              pointRadius: 4,
              backgroundColor: "transparent",
              fill: true,
              borderWidth: 2,
              data: counts,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          legend: {
            position: "bottom",
            labels: {
              padding: 10,
              fontColor: "#1d7af3",
            },
          },
          tooltips: {
            bodySpacing: 4,
            mode: "nearest",
            intersect: 0,
            position: "nearest",
            xPadding: 10,
            yPadding: 10,
            caretPadding: 10,
          },
          layout: {
            padding: { left: 15, right: 15, top: 15, bottom: 15 },
          },
        },
      });
    })
    .catch((error) => console.error("Error:", error));
    
    fetch("/lineChart/")
    .then((response) => response.json())
    .then((result_with_month_names) => {
      var months = Object.keys(result_with_month_names);
      var counts = Object.values(result_with_month_names);
      var lineChart = document.getElementById("lineChart").getContext("2d");

      new Chart(lineChart, {
        type: "line",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
          datasets: [
            {
              label: "Active Users",
              borderColor: "#1d7af3",
              pointBorderColor: "#FFF",
              pointBackgroundColor: "#1d7af3",
              pointBorderWidth: 2,
              pointHoverRadius: 4,
              pointHoverBorderWidth: 1,
              pointRadius: 4,
              backgroundColor: "transparent",
              fill: true,
              borderWidth: 2,
              data: counts,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          legend: {
            position: "bottom",
            labels: {
              padding: 10,
              fontColor: "#1d7af3",
            },
          },
          tooltips: {
            bodySpacing: 4,
            mode: "nearest",
            intersect: 0,
            position: "nearest",
            xPadding: 10,
            yPadding: 10,
            caretPadding: 10,
          },
          layout: {
            padding: { left: 15, right: 15, top: 15, bottom: 15 },
          },
        },
      });
    })
    .catch((error) => console.error("Error:", error));

    fetch("/multilineChart/")
  .then((response) => response.json())
  .then((result_with_month_names) => {
    var countries = Object.keys(result_with_month_names);
    // Extract incident counts for each country
    var incidentCounts = [];
    var incidentCounts2 = [];
    var incidentCounts3 = [];

    // Sort function to sort object keys by month
    function sortObjectKeys(obj) {
      return Object.keys(obj).sort((a, b) => parseInt(a) - parseInt(b));
    }

    // Check if data for each country exists and extract incident counts
    if (countries.length >= 1) {
      var country1_data = result_with_month_names[countries[0]];
      var sortedKeys1 = sortObjectKeys(country1_data);
      incidentCounts = sortedKeys1.map((key) => country1_data[key]);
    }
    if (countries.length >= 2) {
      var country2_data = result_with_month_names[countries[1]];
      var sortedKeys2 = sortObjectKeys(country2_data);
      incidentCounts2 = sortedKeys2.map((key) => country2_data[key]);
    }
    if (countries.length >= 3) {
      var country3_data = result_with_month_names[countries[2]];
      var sortedKeys3 = sortObjectKeys(country3_data);
      incidentCounts3 = sortedKeys3.map((key) => country3_data[key]);
    }

    var multipleLineChart = document.getElementById("multipleLineChart").getContext("2d");

    new Chart(multipleLineChart, {
      type: "line",
      data: {
        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        datasets: [
          {
            label: countries[0],
            borderColor: "#1d7af3",
            pointBorderColor: "#FFF",
            pointBackgroundColor: "#1d7af3",
            pointBorderWidth: 2,
            pointHoverRadius: 4,
            pointHoverBorderWidth: 1,
            pointRadius: 4,
            backgroundColor: "transparent",
            fill: true,
            borderWidth: 2,
            data: incidentCounts,
          },
          {
            label: countries[1],
            borderColor: "#59d05d",
            pointBorderColor: "#FFF",
            pointBackgroundColor: "#59d05d",
            pointBorderWidth: 2,
            pointHoverRadius: 4,
            pointHoverBorderWidth: 1,
            pointRadius: 4,
            backgroundColor: "transparent",
            fill: true,
            borderWidth: 2,
            data: incidentCounts2,
          },
          {
            label: countries[2],
            borderColor: "#f3545d",
            pointBorderColor: "#FFF",
            pointBackgroundColor: "#f3545d",
            pointBorderWidth: 2,
            pointHoverRadius: 4,
            pointHoverBorderWidth: 1,
            pointRadius: 4,
            backgroundColor: "transparent",
            fill: true,
            borderWidth: 2,
            data: incidentCounts3,
          },
        ],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        legend: {
          position: "top",
        },
        tooltips: {
          bodySpacing: 4,
          mode: "nearest",
          intersect: 0,
          position: "nearest",
          xPadding: 10,
          yPadding: 10,
          caretPadding: 10,
        },
        layout: {
          padding: { left: 15, right: 15, top: 15, bottom: 15 },
        },
      },
    });
  })
  .catch((error) => console.error("Error:", error));

    
    }
  
    loadChartData();
  </script>
  
<script>
    
    // var lineChart = document.getElementById("lineChart").getContext("2d"),
    var barChart = document.getElementById("barChart").getContext("2d"),
    // pieChart = document.getElementById("pieChart").getContext("2d"),
    doughnutChart = document.getElementById("doughnutChart").getContext("2d"),
    radarChart = document.getElementById("radarChart").getContext("2d"),
    bubbleChart = document.getElementById("bubbleChart").getContext("2d"),
    // multipleLineChart = document.getElementById("multipleLineChart").getContext("2d"),
    multipleBarChart = document.getElementById("multipleBarChart").getContext("2d"),
    htmlLegendsChart = document.getElementById("htmlLegendsChart").getContext("2d");


 


//   var myLineChart = new Chart(lineChart, {
//     type: "line",
//     data: {
//       labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
//       datasets: [{
//         label: "Active Users",
//         borderColor: "#1d7af3",
//         pointBorderColor: "#FFF",
//         pointBackgroundColor: "#1d7af3",
//         pointBorderWidth: 2,
//         pointHoverRadius: 4,
//         pointHoverBorderWidth: 1,
//         pointRadius: 4,
//         backgroundColor: "transparent",
//         fill: true,
//         borderWidth: 2,
//         data: [542, 480, 430, 550, 530, 453, 380, 434, 568, 610, 700, 900],
//       }],
//     },
//     options: {
//       responsive: true,
//       maintainAspectRatio: false,
//       legend: {
//         position: "bottom",
//         labels: {
//           padding: 10,
//           fontColor: "#1d7af3",
//         },
//       },
//       tooltips: {
//         bodySpacing: 4,
//         mode: "nearest",
//         intersect: 0,
//         position: "nearest",
//         xPadding: 10,
//         yPadding: 10,
//         caretPadding: 10,
//       },
//       layout: {
//         padding: { left: 15, right: 15, top: 15, bottom: 15 },
//       },
//     },
//   });

  var myBarChart = new Chart(barChart, {
    type: "bar",
    data: {
      labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
      datasets: [{
        label: "Sales",
        backgroundColor: "rgb(23, 125, 255)",
        borderColor: "rgb(23, 125, 255)",
        data: [3, 2, 9, 5, 4, 6, 4, 6, 7, 8, 7, 4],
      }],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true,
          },
        }],
      },
    },
  });

//   var myPieChart = new Chart(pieChart, {
//     type: "pie",
//     data: {
//       datasets: [{
//         data: [50, 35, 15],
//         backgroundColor: ["#1d7af3", "#f3545d", "#fdaf4b"],
//         borderWidth: 0,
//       }],
//       labels: ["New Visitors", "Subscribers", "Active Users"],
//     },
//     options: {
//       responsive: true,
//       maintainAspectRatio: false,
//       legend: {
//         position: "bottom",
//         labels: {
//           fontColor: "rgb(154, 154, 154)",
//           fontSize: 11,
//           usePointStyle: true,
//           padding: 20,
//         },
//       },
//       pieceLabel: {
//         render: "percentage",
//         fontColor: "white",
//         fontSize: 14,
//       },
//       tooltips: false,
//       layout: {
//         padding: { left: 20, right: 20, top: 20, bottom: 20 },
//       },
//     },
//   });

  var myDoughnutChart = new Chart(doughnutChart, {
    type: "doughnut",
    data: {
      datasets: [{
        data: [10, 20, 30],
        backgroundColor: ["#f3545d", "#fdaf4b", "#1d7af3"],
      }],
      labels: ["Red", "Yellow", "Blue"],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      legend: {
        position: "bottom",
      },
      layout: {
        padding: { left: 20, right: 20, top: 20, bottom: 20 },
      },
    },
  });

  var myRadarChart = new Chart(radarChart, {
    type: "radar",
    data: {
      labels: ["Eating", "Drinking", "Sleeping", "Designing", "Coding", "Cycling", "Running"],
      datasets: [{
        label: "My First Dataset",
        data: [65, 59, 90, 81, 56, 55, 40],
        fill: true,
        backgroundColor: "rgba(29, 122, 243, 0.2)",
        borderColor: "rgb(29, 122, 243)",
        borderWidth: 2,
        pointBackgroundColor: "rgb(29, 122, 243)",
      }],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scale: {
        ticks: {
          beginAtZero: true,
        },
      },
      legend: {
        position: "bottom",
      },
    },
  });

  var myBubbleChart = new Chart(bubbleChart, {
    type: "bubble",
    data: {
      datasets: [{
        label: "Bubble Chart Dataset",
        data: [{
          x: 50,
          y: 50,
          r: 10,
        },
        {
          x: 100,
          y: 100,
          r: 20,
        },
        {
          x: 150,
          y: 150,
          r: 30,
        }],
        backgroundColor: "rgb(23, 125, 255)",
      }],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
    },
  });

//   var myMultipleLineChart = new Chart(multipleLineChart, {
//     type: "line",
//     data: {
//       labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
//       datasets: [{
//         label: "Active Users",
//         borderColor: "#1d7af3",
//         pointBorderColor: "#FFF",
//         pointBackgroundColor: "#1d7af3",
//         pointBorderWidth: 2,
//         pointHoverRadius: 4,
//         pointHoverBorderWidth: 1,
//         pointRadius: 4,
//         backgroundColor: "transparent",
//         fill: true,
//         borderWidth: 2,
//         data: [542, 480, 430, 550, 530, 453, 380, 434, 568, 610, 700, 900],
//       },
//       {
//         label: "New Users",
//         borderColor: "#fdaf4b",
//         pointBorderColor: "#FFF",
//         pointBackgroundColor: "#fdaf4b",
//         pointBorderWidth: 2,
//         pointHoverRadius: 4,
//         pointHoverBorderWidth: 1,
//         pointRadius: 4,
//         backgroundColor: "transparent",
//         fill: true,
//         borderWidth: 2,
//         data: [200, 300, 350, 400, 420, 450, 500, 520, 550, 580, 600, 650],
//       }],
//     },
//     options: {
//       responsive: true,
//       maintainAspectRatio: false,
//       legend: {
//         position: "bottom",
//         labels: {
//           fontColor: "#1d7af3",
//         },
//       },
//       tooltips: {
//         bodySpacing: 4,
//         mode: "nearest",
//         intersect: 0,
//         position: "nearest",
//         xPadding: 10,
//         yPadding: 10,
//         caretPadding: 10,
//       },
//       layout: {
//         padding: { left: 15, right: 15, top: 15, bottom: 15 },
//       },
//     },
//   });

  var myMultipleBarChart = new Chart(multipleBarChart, {
    type: "bar",
    data: {
      labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
      datasets: [{
        label: "Sales",
        backgroundColor: "#1d7af3",
        data: [500, 400, 700, 650, 800, 900, 1000, 1200, 1100, 950, 1050, 1300],
      },
      {
        label: "Expenses",
        backgroundColor: "#fdaf4b",
        data: [400, 350, 500, 600, 700, 800, 900, 1000, 1050, 1100, 1200, 1300],
      }],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        yAxes: [{
          ticks: {
            beginAtZero: true,
          },
        }],
      },
    },
  });

  var myHtmlLegendsChart = new Chart(htmlLegendsChart, {
    type: "pie",
    data: {
      datasets: [{
        data: [50, 35, 15],
        backgroundColor: ["#1d7af3", "#f3545d", "#fdaf4b"],
        borderWidth: 0,
      }],
      labels: ["New Visitors", "Subscribers", "Active Users"],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      legend: {
        position: "bottom",
        labels: {
          fontColor: "rgb(154, 154, 154)",
          fontSize: 11,
          usePointStyle: true,
          padding: 20,
        },
      },
      pieceLabel: {
        render: "percentage",
        fontColor: "white",
        fontSize: 14,
      },
      tooltips: false,
      layout: {
        padding: { left: 20, right: 20, top: 20, bottom: 20 },
      },
    },
  });
  document.getElementById("myChartLegend").innerHTML = myHtmlLegendsChart.generateLegend();
</script>
{% endblock %} {% block chart %}


